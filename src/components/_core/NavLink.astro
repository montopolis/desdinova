---
const pathname = new URL(Astro.request.url).pathname
const url = new URL(Astro.props.href, Astro.url)
const isExternal = url.host !== Astro.url.host
import {Icon} from "astro-icon/components"
import {ACTIVE_LINK, INACTIVE_LINK} from "../../../site.config.mjs"

console.log("pathname=" + pathname)
console.log(url)

interface Props {
    title: string
    href: string
    path?: string
    target?: string
    icon?: string
}

const {title, href, path = href, target = "_self", icon = ""} = Astro.props
---

<a
    href={href}
    class={pathname === path ? " " + ACTIVE_LINK : " " + INACTIVE_LINK}
    aria-current={pathname === path ? "page" : null}
    rel={isExternal ? "noopener" : null}
    target={target}>
    {
        icon !== "" && (
            <Icon
                name={icon}
                class={
                    pathname === path
                        ? "mr-1 inline h-4 w-4 " + {ACTIVE_LINK}
                        : "mr-1 inline h-4 w-4 " + {INACTIVE_LINK}
                }
            />
        )
    }

    {title}</a
>
