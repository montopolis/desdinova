---
import siteData from "../../config/siteData"
import {Icon} from "astro-icon/components"

const pathname = new URL(Astro.request.url).pathname
const url = new URL(Astro.props.href, Astro.url)

interface Props {
    title: string
    href: string
    path?: string
    target?: string
    icon?: string
}

const {title, href, path = href, target = "_self", icon = ""} = Astro.props

const isExternal = url.host !== Astro.url.host
const isActive: boolean = pathname === path
---

<a
    href={href}
    class={isActive
        ? siteData.colors.activeMenuClass
        : siteData.colors.inactiveMenuClass}
    aria-current={isActive ? "page" : null}
    rel={isExternal ? "noopener" : null}
    target={target}>
    {
        icon !== "" && (
            <Icon
                name={icon}
                class={
                    isActive
                        ? siteData.colors.activeMenuIconClass
                        : siteData.colors.inactiveMenuIconClass
                }
            />
        )
    }

    {title}</a
>
