---
import type {ImageMetadata} from "astro"
import {Picture} from "astro:assets"

interface Props {
    imagePath?: string
    altText: string
}

let {imagePath, altText} = Astro.props
const images = import.meta.glob<{default: ImageMetadata}>(
    "/src/assets/images/blog/*.{jpeg,jpg,png,gif}",
)
if (imagePath == undefined) {
    imagePath = "/src/assets/images/blog/blog-post-fallback-image.png"
}
if (!images[imagePath])
    throw new Error(
        `"${imagePath}" does not exist in glob: "/src/assets/images/blog/*.{jpeg,jpg,png,gif}"`,
    )
---

<Picture
    src={images[imagePath]()}
    densities={[1.5, 2]}
    alt={altText}
    loading="eager"
/>
